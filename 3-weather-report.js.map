{"version":3,"file":"3-weather-report.js","sources":["../src/js/3-weather-report.js"],"sourcesContent":["// Потрібно створити функціонал для отримання прогнозу погоди в місті.\n// Використай публічне API https://www.weatherapi.com/docs/\n// Використовуй ендпоінт Forecast для того, щоб отримати прогноз погоди на декілька днів.\n\n// Створи форму в яку користувач:\n// 1 вводить назву міста.\n// 2 обирає на яку кількість днів він хоче отримати прогноз погоди (3, 5 та 7 днів).\n// (Іноді параметр не працює в такому випадку можна зробити пошук на 1, 2 та 3 дні)\n// Приклад форми https://prnt.sc/kFmLOj6gBdv-\n\n// Після сабміту форми відмалюй картки з інформацією отриманою з бекенду.\n// Картка має містити відомості про:\n// 1 Зображення з погодою (icon)\n// 2 Текст з погодою (text)\n// 3 Дату (date)\n// 4 Середню температуру в Цельсія (avgtemp_c)\n// Приклад картки https://prnt.sc/h_p-A6Hty-i-\n\n// °C\n\nconst BASE_URL = 'http://api.weatherapi.com/v1';\nconst API_KEY = '2f11846a6adc4e3eb6f115653251510';\n\nconst form = document.querySelector('.js-search-form');\nconst container = document.querySelector('.js-list');\nconst modalOverlay = document.querySelector('.modal-overlay');\nconst modal = document.querySelector('.modal');\n\nform.addEventListener('submit', handlerSubmit);\n\nfunction handlerSubmit(event) {\n  event.preventDefault();\n\n  const { city, days } = event.target.elements;\n\n  serviceWeather(city.value, days.value)\n    .then(data => {\n      container.innerHTML = createMarkup(data.forecast.forecastday);\n    })\n    .catch(error => {\n      alert(error);\n    });\n}\n\nfunction serviceWeather(city = '', days = 1) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: city,\n    days,\n    lang: 'uk',\n  });\n\n  return fetch(`${BASE_URL}/forecast.json?${params}`).then(res => {\n    if (!res.ok) {\n      throw new Error('Щось пішло не так');\n    }\n\n    return res.json();\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        date,\n        day: {\n          avgtemp_c,\n          condition: { icon, text },\n        },\n      }) =>\n        `<li class=\"weather-card\">\n            <img class=\"weather-icon\" src=\"${icon}\" alt\"${text}\">\n            <h2 class=\"weather-date\">${date}</h2>\n            <h3 class=\"weather-text\">${text}</h3>\n            <h3 class=\"temperature\">${avgtemp_c} °C</h3>\n        </li>`\n    )\n    .join('');\n}\n\ncontainer.addEventListener('click', onListClick);\nmodalOverlay.addEventListener('click', onListBlur);\n\nfunction onListBlur() {\n  modalOverlay.classList.add('isOpen');\n}\n\nfunction onListClick() {\n  modalOverlay.classList.remove('isOpen');\n}\n"],"names":["BASE_URL","API_KEY","form","container","modalOverlay","handlerSubmit","event","city","days","serviceWeather","data","createMarkup","error","params","res","arr","date","avgtemp_c","icon","text","onListClick","onListBlur"],"mappings":"oDAoBA,MAAMA,EAAW,+BACXC,EAAU,kCAEVC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAe,SAAS,cAAc,gBAAgB,EAC9C,SAAS,cAAc,QAAQ,EAE7CF,EAAK,iBAAiB,SAAUG,CAAa,EAE7C,SAASA,EAAcC,EAAO,CAC5BA,EAAM,eAAc,EAEpB,KAAM,CAAE,KAAAC,EAAM,KAAAC,CAAI,EAAKF,EAAM,OAAO,SAEpCG,EAAeF,EAAK,MAAOC,EAAK,KAAK,EAClC,KAAKE,GAAQ,CACZP,EAAU,UAAYQ,EAAaD,EAAK,SAAS,WAAW,CAClE,CAAK,EACA,MAAME,GAAS,CACd,MAAMA,CAAK,CACjB,CAAK,CACL,CAEA,SAASH,EAAeF,EAAO,GAAIC,EAAO,EAAG,CAC3C,MAAMK,EAAS,IAAI,gBAAgB,CACjC,IAAKZ,EACL,EAAGM,EACH,KAAAC,EACA,KAAM,IACV,CAAG,EAED,OAAO,MAAM,GAAGR,CAAQ,kBAAkBa,CAAM,EAAE,EAAE,KAAKC,GAAO,CAC9D,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,mBAAmB,EAGrC,OAAOA,EAAI,MACf,CAAG,CACH,CAEA,SAASH,EAAaI,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CACC,KAAAC,EACA,IAAK,CACH,UAAAC,EACA,UAAW,CAAE,KAAAC,EAAM,KAAAC,CAAM,CAC1B,CACF,IACC;AAAA,6CACqCD,CAAI,SAASC,CAAI;AAAA,uCACvBH,CAAI;AAAA,uCACJG,CAAI;AAAA,sCACLF,CAAS;AAAA,cAE1C,EACA,KAAK,EAAE,CACZ,CAEAd,EAAU,iBAAiB,QAASiB,CAAW,EAC/ChB,EAAa,iBAAiB,QAASiB,CAAU,EAEjD,SAASA,GAAa,CACpBjB,EAAa,UAAU,IAAI,QAAQ,CACrC,CAEA,SAASgB,GAAc,CACrBhB,EAAa,UAAU,OAAO,QAAQ,CACxC"}